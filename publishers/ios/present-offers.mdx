---
title: "Presenting Offers"
---

Present Encore retention offers to users at key moments in your app.

## Overview

Encore allows you to present targeted offers to users in exchange for rewards (free trials, discounts, credits) at critical moments like cancellation flows or feature paywalls. The SDK provides multiple presentation methods to fit your app's architecture.

---

## Presentation Methods

### SwiftUI: Fluent Builder API (Recommended)

The most concise and flexible way to present offers in SwiftUI - perfect for button actions.

#### Minimal Setup

Get started with a single line - no callbacks required:

```swift
Button("Show Offers") {
    Encore.placement().show()
}
```

That's it! The SDK handles everything automatically.

#### Full-Featured Setup (Cancellation Flow)

Add optional callbacks for custom logic, analytics, or post-presentation actions:

```swift
Button("Cancel Subscription") {
    Encore.placement()
        .onLoadingStateChange { isLoading in
            // optional: show/hide a spinner
            self.isLoadingOffer = isLoading
        }
        .onResult { result in
            switch result {
            case .success(.granted(let entitlement)):
                // handle success by entitlement type
                analytics.track("offer_accepted")
                applyEntitlement(entitlement)
                return // don't proceed with cancellation
            case .success(.rejected):
                // user declined or no offers available
                analytics.track("offer_declined")
                break
            case .failure(let error):
                // log error
                analytics.track("offer_error", error: error)
                break
            }
            // proceed with original user action
            proceedWithCancellation()
        }
        .show()
}
```

> **‚ö†Ô∏è Important:** When presenting offers in critical flows (like cancellation), always ensure the user can proceed with their intended action. In the example above, `proceedWithCancellation()` is called for both rejection and error cases, ensuring users are never blocked from canceling their subscription.

**Why it's recommended:**
- ‚úÖ Zero config to get started - works out of the box
- ‚úÖ Optional callbacks for custom logic when needed
- ‚úÖ Works directly in button actions
- ‚úÖ No @State management needed
- ‚úÖ Clean, readable callback chain

---

### SwiftUI: `.encoreSheet()` Modifier

The most declarative way to present offers using SwiftUI state:

```swift
import EncoreSDK
import SwiftUI

struct CancellationView: View {
    @State private var showEncoreOffer = false
    
    var body: some View {
        VStack {
            Text("We're sad to see you go...")
            Button("Cancel Subscription") { showEncoreOffer = true }
        }
        .encoreSheet(isPresented: $showEncoreOffer) { result in
            switch result {
            case .success(.granted(let entitlement)):
                print("Granted: \(entitlement)")
                return
            case .success(.rejected), .failure:
                break
            }
            proceedWithCancellation()
        }
    }
}
```

---

### UIKit: Imperative Presentation

For UIKit apps or when you need programmatic control:

```swift
import EncoreSDK

class CancellationViewController: UIViewController {
    @IBAction func cancelButtonTapped(_ sender: UIButton) {
        Encore.shared.presentOffer(from: self) { result in
            switch result {
            case .success(.granted(let entitlement)):
                print("Granted: \(entitlement)")
                return
            case .success(.rejected), .failure:
                break
            }
            self.proceedWithCancellation()
        }
    }
}
```

---

### SwiftUI: Async/Await

For when you need to await the result in Swift concurrency:

```swift
Button("Cancel Subscription") {
    Task {
        do {
            let result = try await Encore.shared.show()
            switch result {
            case .granted(let entitlement):
                print("Granted: \(entitlement)")
                return
            case .rejected:
                break
            }
        } catch {
            // error occurred
        }
        proceedWithCancellation()
    }
}
```

---

## Third-Party Paywall Integrations

Encore seamlessly integrates with popular paywall providers like Superwall and RevenueCat. Present retention offers as a last-chance save when users dismiss your paywalls without converting.

<Accordion title="Superwall Integration">

If you're using Superwall for your paywalls, you can seamlessly integrate Encore to present retention offers at strategic moments.

#### Option 1: Custom Paywall Action

Create/Update the Superwall delegate to handle custom actions from your paywall:

```swift
import SuperwallKit
import EncoreSDK

// Listen to Superwall's custom actions
class SWDelegate: SuperwallDelegate {
    func handleCustomPaywallAction(withName name: String) {
        // Action is EncoreTrigger
        if name == "EncoreTrigger" {
            Encore.placement().show()
        }
    }
}
```

Then, in the Superwall editor, you can add a custom action named `"EncoreTrigger"` to any button or element in your paywall. This gives you full control over when and where Encore offers appear within your paywall flow.

<video
  className="w-full aspect-video rounded-xl"
  autoPlay
  loop
  muted
  playsInline
  src="https://storage.googleapis.com/yaw-assets/website/Superwall%20Demo.mp4"
></video>

#### Option 2: On Paywall Dismissal

You can also trigger Encore when a user dismisses your Superwall paywall without converting:

```swift
import SuperwallKit
import EncoreSDK

// Listen to Superwall's paywall dismissal
class SWDelegate: SuperwallDelegate {
    func willDismissPaywall(withInfo paywallInfo: PaywallInfo) {
        // User dismissed without purchasing
        Encore.placement().show()
    }
}
```

This approach is ideal for presenting a last-chance retention offer when users close your paywall.

> **üí° Tip:** The `Encore.placement().show()` method is the same fluent API shown in the [SwiftUI Builder API section](#swiftui-fluent-builder-api-recommended) above. You can chain optional callbacks like `.onResult()` if you need to handle the outcome.

</Accordion>

<Accordion title="RevenueCat Integration">

If you're using RevenueCat for your paywalls, you can trigger Encore retention offers when users dismiss your paywall without purchasing. The implementation depends on which RevenueCat paywall presentation method you're using.

#### Option 1: Using PaywallView

If you're using RevenueCat's `PaywallView` component, use the `onRequestDismiss` callback to trigger Encore:

```swift
import RevenueCat
import RevenueCatUI
import EncoreSDK

PaywallView(
    placement: "your_placement",
    params: [String: Any]?,
    paywallOverrides: PaywallOverrides?,
    onRequestDismiss: { paywallInfo, paywallResult in
        // User dismissed without purchasing - trigger Encore
        Encore.placement().show()
    },
    feature: (() -> Void)?
)
```

#### Option 2: Using presentPaywallIfNeeded Modifier

If you're using the `.presentPaywallIfNeeded` modifier, use the `onDismiss` callback:

```swift
import RevenueCat
import RevenueCatUI
import EncoreSDK

YourView()
    .presentPaywallIfNeeded(
        presentationMode: {.fullScreen, .sheet, .default},
        onDismiss: {
            // User dismissed without purchasing - trigger Encore
            Encore.placement().show()
        }
    )
```

Both approaches present a last-chance retention offer when users close your paywall without converting.

> **üí° Tip:** Like the Superwall integration, you can reference the full [SwiftUI Builder API](#swiftui-fluent-builder-api-recommended) with optional callbacks to handle the outcome of the Encore offer.

</Accordion>

---

## Result Types

### Entitlements

When an offer is granted, you receive one of these entitlement types:

| Entitlement | Description | Example Use Case |
|-------------|-------------|------------------|
| `.freeTrial(value:unit:)` | Time-limited free access to premium features. `value`: Duration amount, `unit`: `.days` or `.months` | 7-day free trial, 1-month trial |
| `.discount(value:unit:)` | Percentage or dollar-based discount on subscription. `value`: Discount amount, `unit`: `.percent` or `.dollars` | 50% off, $10 off |
| `.credit(value:unit:)` | Account credits applied to user's balance. `value`: Credit amount, `unit`: `.dollars` | $5 account credit |


**Example:**
```swift
case .success(.granted(let entitlement)):
    switch entitlement {
    case .freeTrial(let value, let unit):
        print("Free trial: \(value ?? 0) \(unit?.description ?? "")")
    case .discount(let value, let unit):
        print("Discount: \(value ?? 0) \(unit?.description ?? "")")
    case .credit(let value, let unit):
        print("Credit: \(value ?? 0) \(unit?.description ?? "")")
    }
```

### Rejection Reasons

When an offer is rejected, you receive one of these reasons:

| Reason | Description | When This Occurs |
|--------|-------------|------------------|
| `.userCancelled` | User dismissed the offer without interacting | User tapped outside modal, pressed back/close |
| `.userDeclinedOffer` | User explicitly declined the offer | User tapped "No Thanks" or decline button |
| `.noOffersAvailable` | No offers configured for this user | No campaigns match user criteria, or all offers exhausted |

**Example:**
```swift
case .success(.rejected(let reason)):
    switch reason {
    case .userCancelled:
        analytics.track("offer_dismissed")
    case .userDeclinedOffer:
        analytics.track("offer_declined_explicit")
    case .noOffersAvailable:
        analytics.track("no_offers_available")
    }
```

### Errors

When a system error occurs, you receive one of these errors:

| Error | Description | When This Occurs |
|-------|-------------|------------------|
| `.networkError(Error)` | Network connection issue | No internet, timeout, connection failed |
| `.notInitialized` | SDK not configured | `configure()` not called before use |
| `.apiError(code:message:)` | API returned error response | Server validation error, business logic error |
| `.httpError(statusCode:message:)` | HTTP status error | 4xx client errors, 5xx server errors |
| `.decodingError(Error)` | Response parsing failed | Unexpected response format (rare) |
| `.userIdNotAvailable` | User ID required but missing | Internal SDK issue (rare, auto-generates IDs) |
| `.invalidURL` | URL construction failed | Malformed URL (rare) |
| `.unknown` | Unexpected system error | Catch-all for unforeseen issues |

**Example:**
```swift
case .failure(let error):
    switch error {
    case .networkError(let underlyingError):
        showAlert("Check your internet connection")
        print("Network: \(underlyingError)")
    case .notInitialized:
        print("SDK not configured")
        Crashlytics.log("Encore not initialized")
    case .apiError(let code, let message):
        analytics.track("api_error", ["code": code ?? "unknown"])
    case .httpError(let statusCode, _):
        print("HTTP \(statusCode)")
    default:
        print("Error: \(error)")
    }
```

> **üí° Note:** The SDK is designed to never crash your app. All errors are delivered via callbacks, allowing you to handle them gracefully and always let users proceed with their intended action.

---

## When to Present Offers

### ‚úÖ Recommended Moments

1. **Cancellation Flows** - User is about to cancel subscription
2. **Feature Paywalls** - User hits a premium feature without access
3. **Trial Expiration** - User's trial is ending soon
4. **Downgrade Attempts** - User tries to move to a lower tier
5. **Churn Signals** - Decreased engagement or usage

### ‚ùå Avoid

- **App Launch** - Too early, user hasn't engaged yet
- **Onboarding** - Focus on core value first
- **Mid-Task** - Don't interrupt active workflows
- **After Purchase** - User already committed

---

## Next Steps

- [Tracking Entitlements](./track-entitlements.mdx) - Monitor what entitlements users have
- [User Management](./user-management.mdx) - Identify users and set attributes for personalized offers
- [SuperWall Integration](./superwall-integration.mdx) - Combine with SuperWall for enhanced paywall experiences
- [RevenueCat Integration](./revenuecat-integration.mdx) - Integrate with RevenueCat for comprehensive subscription management